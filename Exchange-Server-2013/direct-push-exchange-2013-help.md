---
title: '直推技术: Exchange 2013 Help'
TOCTitle: 直推技术
ms:assetid: 373c1629-3d4b-4828-b014-9e103de4ef25
ms:mtpsurl: https://technet.microsoft.com/zh-cn/library/Aa997252(v=EXCHG.150)
ms:contentKeyID: 50490286
ms.date: 01/11/2018
mtps_version: v=EXCHG.150
ms.translationtype: HT
---

# 直推技术

 

_**适用于：**Exchange Online, Exchange Server 2013_

_**上一次修改主题：**2012-07-11_

直推技术是内置于 Microsoft Exchange Server 2013 中的功能。直推技术通过移动电话网络连接或无线网络连接使移动设备保持为当前状态。当有新内容可以准备同步时，它将通知移动设备。

**目录**

概述

直推技术拓扑

将直推技术功能配置为通过防火墙工作

## 概述

要使用直推技术功能，移动设备必须支持直推技术。这些设备包括：

  - 所有版本的 Windows Phone

  - 由 MicrosoftExchange ActiveSync 许可生产商生产并且专门为兼容直推技术而设计的移动电话

默认情况下，在 Exchange 2013 中已启用直推技术。支持直推技术的移动设备向运行 Microsoft Exchange 的服务器发出长期 HTTPS 请求。Exchange 服务器会监视用户邮箱的活动，并在发生任何更改（例如，新的或更改的电子邮件、日历、联系人或任务项目）时向移动设备发送响应。如果更改发生于 HTTPS 请求的生命期内，则 Exchange 服务器将向设备发出响应，声明已发生此更改并且设备应当启动与 Exchange 服务器的同步。然后，设备将向服务器发出该请求。完成同步后，将生成新的长期 HTTPS 请求，以便再次开始该过程。这样便可以保证将电子邮件、日历、联系人和任务项目快速传递到移动设备中，并且始终与 Exchange 服务器保持同步。

## 直推技术拓扑

直推技术的工作方式如下：

1.  已配置为与 Exchange 2013 服务器保持同步的移动设备向服务器发出 HTTPS 请求。该请求称为 PING。该请求告诉服务器：如果配置为进行同步的任何文件夹在下一个 15 分钟内有任何项目发生更改，则通知设备。否则，服务器应当返回 HTTP 200 OK 消息。然后移动设备将处于待机状态。这 15 分钟的时间跨度称为*检测间隔*。

2.  如果在 15 分钟内没有项目发生更改，则服务器返回 HTTP 200 OK 作为响应。移动设备接收此响应后将恢复活动（称为“唤醒”），之后再次发出其请求。这将重新开始该过程。

3.  如果在 15 分钟检测间隔内有任何项目发生更改或收到新项目，则服务器将发送响应通知移动设备有新的或已更改的项目，同时提供新的或已更改的项目所在文件夹的名称。移动设备收到此响应之后，将为有新项目或项目发生更改的文件夹发出同步请求。同步完成后，移动设备将发出新的 PING 请求，并开始整个过程。

直推技术依赖于支持长期 HTTPS 请求的网络条件。如果移动设备的运营商网络或防火墙不支持长期 HTTPS 请求，则 HTTPS 请求将停止。下列步骤说明了当移动设备的运营商网络有 13 分钟的超时值时直推技术如何工作。

1.  移动设备向服务器发出 HTTPS 请求。该请求告诉服务器：如果配置为进行同步的任何文件夹在下一个 15 分钟内有任何项目发生更改，则通知设备。否则，服务器应当返回 HTTP 200 OK 消息。然后移动设备将处于待机状态。

2.  如果在 15 分钟之后服务器没有响应，移动设备将被唤醒，并认定与服务器的连接由于网络问题而超时。设备将重新发出 HTTPS 请求，但这次使用的检测间隔为 8 分钟。

3.  8 分钟之后，服务器将发送 HTTP 200 OK 消息。然后，设备将向服务器发出新的检测间隔为 12 分钟的 HTTPS 请求，以尝试获得更长的连接。

4.  4 分钟之后，将收到新的电子邮件，并且服务器给出的响应是发送 HTTPS 请求来告诉设备执行同步。设备同步并重新发出检测信号为 12 分钟的 HTTPS 请求。

5.  12 分钟之后，如果没有新的或更改的项目，则服务器以发送 HTTP 200 OK 消息作为响应。设备苏醒并认定网络条件支持 12 分钟的检测间隔。然后，设备将重新发出检测间隔为 16 分钟的 HTTPS 请求，以尝试获得更长的连接。

6.  16 分钟之后，没有从服务器收到响应。设备苏醒并认定网络条件无法支持 16 分钟的检测间隔。由于此失败是在设备尝试增加检测间隔之后直接发生的，因此它认定检测间隔已经达到它的最大限制。然后，由于这是最后一个成功的检测间隔，因此设备发出检测间隔为 12 分钟的 HTTPS 请求。

移动设备将试图使用网络可以支持的最长检测间隔。这样可以延长设备的电池供电时间，并减少通过网络传输的数据量。移动运营商可以在移动设备的注册表设置中指定最大、最小和初始检测信号值。

## 将直推技术功能配置为通过防火墙工作

要通过防火墙使用直推技术，必须打开 TCP 端口 443。安全套接字层 (SSL) 必须使用该端口，并且必须在 Internet 和客户端访问服务器之间打开该端口。

除了在防火墙上打开若干端口，为了获得最佳直推技术性能，还应当在防火墙上将超时值从默认的 15 分钟增加到 30 分钟。HTTPS 请求的最大长度由下列设置决定：

  - 在防火墙上设置的、用于控制从 Internet 到客户端访问服务器的通信的最大超时值

  - 移动服务提供商设置的防火墙超时值

